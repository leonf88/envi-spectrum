# Regression Model by Matlab 

## 数据格式（Data format）

数据格式如下，适用于 model 和 test 

     | Col1 | Col2 | Col3
     | Type | Name | Data Name
-----|------|------|----
Row1 | ---- | ---- | 0.0 (numeric)  
Row2 | ---- | ---- | 0.0 (numeric)

## 使用注意事项

1. 数据路径，model.m 中的 `model_file` 指定模型训练数据，`test_file` 指定模型检验数据

2. model 与 test 的数据列需要一致，对应列的数据是同一类数据

## 关于多变量模型训练与检验的一些说明

### 模型检验

    verify.m 文件
    确定是 单变量模型 or 多变量模型？
    单变量模型中确定是 线性 or 指数 or 对数 模型？
    确定是哪列的数据？参考 verify_l.csv, verify_m.csv, verify_h.csv 

### 多变量模型

    x1，x2，x3，x4，x5 分别代表“蓝谷吸收峰深度”，“蓝谷SAI”，“红谷吸收峰深度”，“红谷SAI”，“弱水汽吸收波段SAI”。
    关于五个变量与 y 的线性模型，及其参数如下

    方程 R^2 F P RME
    y=0.069602+31.186739*x1 0.556859 32.672115 0.000005 0.141592
    y=-0.503608+0.720645*x2 0.696529 59.675464 0.000000 0.117172
    y=0.170165+2.221719*x3 0.671449 53.135325 0.000000 0.121918
    y=0.229903+0.062886*x4 0.661815 50.880914 0.000000 0.123693
    y=-1.388124+1.551631*x5 0.440423 20.463694 0.000118 0.159110

    综合判定，选择 x2 作为单变量线性模型中的最佳模型。如果考虑所有的模型情况，选择 x4 的对数模型是更好的选择，即

    方程 R^2 F P RME
    y=0.124633+0.330154*ln(x)   0.765635    84.937884   0   0.102971

    结论1：
    如果从 x2 出发，使用 matlab 逐步回归模型进行建模，得到分析结果如下

    步长 加入变量 R^2
    1    x2       0.697

    对高光谱变量进行逐步回归分析，当有一个变量进入方程时，可以解释xxx样本间方差的69.7％。

    结论2：
    如果从 x4 出发，使用 matlab 逐步回归模型进行建模，得到分析结果如下

    步长 进入变量 R^2
    1    x4       0.662
    2    x2       0.697
    3    x3       0.704
    4    x1       0.731

    对高光谱变量进行逐步回归分析，当有一个或四个变量进入方程时，分别可以解释xxx样本间方差的69.7％和73.1％。说明 用逐步回归分析方法来揭示xxx和高光谱变量之间的关系更加方便。

    关于带入数据为

    params=[
    [5.55,0.0055 ,1.0780 ,0.0550 ,1.4670 ,1.0813  ], 
    [86.08,0.0214 ,1.9552 ,0.3076 ,9.6500 ,1.3124 ],
    [51.52,0.0139 ,1.2495 ,0.1141 ,2.2567 ,1.1216 ],
    [50.40,0.0077 ,1.1674 ,0.0664 ,1.8626 ,1.1469 ],
    [53.29,0.0090 ,1.2098 ,0.0838 ,2.1814 ,1.1833 ],
    [29.38,0.0100 ,1.1566 ,0.0767 ,1.7448 ,1.1212 ],
    [22.03,0.0098 ,1.1453 ,0.0784 ,1.6987 ,1.0991 ],
    [90.45,0.0253 ,2.0805 ,0.3184 ,12.6749,1.4957 ],
    [86.08,0.0225 ,1.7864 ,0.3473 ,9.8354 ,1.2852 ],
    [58.53,0.0146 ,1.3721 ,0.1517 ,3.4605 ,1.2306 ],
    [56.83,0.0121 ,1.4291 ,0.1295 ,3.8490 ,1.2542 ],
    [25.90,0.0088 ,1.2106 ,0.0783 ,2.1409 ,1.1884 ],
    [33.90,0.0148 ,1.3520 ,0.1125 ,2.6306 ,1.1666 ],
    [25.34,0.0091 ,1.1592 ,0.0828 ,1.8377 ,1.1569 ],
    [38.19,0.0086 ,1.1646 ,0.0800 ,1.8785 ,1.2015 ],
    [53.06,0.0091 ,1.1812 ,0.0875 ,2.0425 ,1.1246 ],
    [11.14,0.0104 ,1.1179 ,0.0818 ,1.5442 ,1.0566 ],
    [17.58,0.0112 ,1.1430 ,0.0973 ,1.7501 ,1.1060 ],
    [31.38,0.0115 ,1.2502 ,0.0803 ,2.0588 ,1.2136 ],
    [32.15,0.0099 ,1.2039 ,0.0824 ,2.0478 ,1.1460 ],
    [23.14,0.0024 ,1.0617 ,0.0283 ,1.4352 ,1.2124 ],
    [36.97,0.0022 ,1.0479 ,0.0256 ,1.3323 ,1.0875 ],
    [22.87,0.0102 ,1.1946 ,0.0838 ,1.8980 ,1.1508 ],
    [33.69,0.0100 ,1.2041 ,0.0731 ,1.8751 ,1.1382 ],
    [57.27,0.0103 ,1.2475 ,0.0974 ,2.4685 ,1.1671 ],
    [45.54,0.0084 ,1.2303 ,0.0836 ,2.4704 ,1.1165 ],
    [51.31,0.0135 ,1.3413 ,0.1315 ,3.1497 ,1.0638 ],
    [53.00,0.0145 ,1.2372 ,0.1431 ,2.4443 ,1.0429 ]];


    y=params(:,1) * 0.01;
    x=params(:,2:6) % 每一列分别代表 x1 到 x5 的值

    逐步回归方法为 

    stepwise(x, y, 5, 0.5) % stepwise(x，y，inmodel，alpha)

    其中x是自变量数据，y是因变量数据，分别为n×m和n×1矩阵，inmodel是矩阵的列数指标(缺省时为全部自变量)，alpha,为显著性水平(缺省时为0.5)

    关于弹出框的变量解释，参考百度知道

    http://zhidao.baidu.com/link?url=uXqCmM5iFa21x3GtyXDiroEYTWEZKv1lsy7BQxZv8ejY-y4fTWzrsj7QIrdKwMht1ibr_IziQC6G4twQqTJXb1uedFXFQcy5bf4LG38m96i
